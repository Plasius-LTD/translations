# AGENTS

## Purpose
This repo provides the `@plasius/translations` TypeScript package: a small i18n manager with a translation store plus optional React context and hooks.

## Key paths
- `src/i18n/i18n.ts`: core i18n logic (translation resolution, RTL detection)
- `src/i18n/i18n.store.ts`: singleton store, language loading via fetch/localStorage
- `src/i18n/i18n.context.tsx`: React provider + hook
- `src/index.ts`: package entry point/exports
- `tests/`: vitest tests (jsdom)
- `dist/`: build output (generated by tsup)

## Commands
- Build: `npm run build`
- Tests: `npm run test`
- Test watch: `npm run test:watch`
- Lint: `npm run lint`
- Clean: `npm run clean`

## Development notes
- `loadLanguage` fetches `/i18n/{lang}` and persists `userLang` in `localStorage`; keep these behaviors in sync with tests.
- Default translations include a minimal `loading` key for multiple locales; keep placeholders consistent when editing defaults.
- Module side effects in `i18n.store.ts` run on import to restore saved language; avoid heavy work at import time.
- React API is a peer dependency on `react@^19`; keep context hooks compatible.

## Conventions
- Use Conventional Commits (see `CONTRIBUTING.md`).
- Update `README.md` and `CHANGELOG.md` for user-facing changes.
- Follow `SECURITY.md` for vulnerability reporting.
- Contributions require a CLA (see `legal/CLA.md`).

## AI guidance
- After any change, run relevant BDD/TDD tests when they exist; mention if skipped.
- For fixes, add/update a BDD or TDD test that fails first and validate it passes after the fix when possible.
- When adding or updating dependencies, prefer lazy-loading (dynamic import/code splitting) to avoid heavy first-load network use when applicable.
